{# motopuppu/templates/help/features/activity_log.html #}
{% extends "help/layout.html" %}

{% block help_content %}
<p class="lead">サーキットでの走行や公道でのツーリングなど、あなたのバイク活動を計画し、記録するための機能です。目的に応じて「イベント」「走行ログ」「ツーリングログ」の3種類を使い分けることができます。</p>

<div class="row text-center mt-4">
    <div class="col-md-4">
        <div class="card h-100 shadow-sm">
            <div class="card-header bg-info text-dark"><strong><i class="fas fa-calendar-plus me-2"></i>イベント (計画)</strong></div>
            <div class="card-body">
                <p class="card-text small">ツーリングや走行会などの<strong class="text-info">「計画」</strong>を作成し、参加者を募集するための共有ページを作成する機能です。</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 shadow-sm">
            <div class="card-header bg-primary text-white"><strong><i class="fas fa-flag-checkered me-2"></i>走行ログ (記録)</strong></div>
            <div class="card-body">
                <p class="card-text small">サーキット走行など、パフォーマンスを重視した活動の<strong class="text-primary">「記録」</strong>に特化しています。ラップタイムや車両セッティングを管理・分析できます。</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 shadow-sm">
            <div class="card-header bg-success text-white"><strong><i class="fas fa-map-signs me-2"></i>ツーリングログ (記録)</strong></div>
            <div class="card-body">
                <p class="card-text small">ツーリングのルートや思い出を<strong class="text-success">「記録」</strong>するのに最適です。立ち寄りスポットやSNS投稿をまとめたスクラップブックを作成できます。</p>
            </div>
        </div>
    </div>
</div>

<h3 class="mt-5 border-bottom pb-2">使い方ガイド：イベント (計画編)</h3>
<p>友人とのツーリングや走行会の計画を立て、参加者を募るための機能です。</p>
<div class="accordion" id="event-guide">
    <div class="accordion-item">
        <h2 class="accordion-header" id="event-step1-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#event-step1-collapse" aria-expanded="true" aria-controls="event-step1-collapse">
                <strong>ステップ1: イベントを作成する</strong>
            </button>
        </h2>
        <div id="event-step1-collapse" class="accordion-collapse collapse show" aria-labelledby="event-step1-header" data-bs-parent="#event-guide">
            <div class="accordion-body">
                <p>ナビゲーションバーの「活動記録」→「イベント管理」から「新しいイベントを作成」ボタンを押します。</p>
                <ul>
                    <li>イベント名、日時、場所、詳細などを入力します。</li>
                    <li><strong>「イベント一覧に公開する」</strong>にチェックを入れると、ログインしていない人も含め、誰でも閲覧できる公開イベント一覧に掲載されます。仲間内だけのイベントの場合は、チェックを外してください。</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="event-step2-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#event-step2-collapse" aria-expanded="false" aria-controls="event-step2-collapse">
                <strong>ステップ2: 参加者を募集する</strong>
            </button>
        </h2>
        <div id="event-step2-collapse" class="accordion-collapse collapse" aria-labelledby="event-step2-header" data-bs-parent="#event-guide">
            <div class="accordion-body">
                <p>イベントを作成すると、誰でもアクセスできる「公開URL」が発行されます。このURLを友人やSNSで共有することで、参加者を募集できます。</p>
                <ul>
                    <li>URLにアクセスした人は、ログイン不要で「参加」「保留」「不参加」の出欠を登録できます。</li>
                    <li>出欠の登録・変更には、参加者自身が設定する「パスコード」が必要です。これにより、他人によるなりすましやいたずらを防ぎます。</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="event-step3-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#event-step3-collapse" aria-expanded="false" aria-controls="event-step3-collapse">
                <strong>ステップ3: イベントから活動ログを作成する</strong>
            </button>
        </h2>
        <div id="event-step3-collapse" class="accordion-collapse collapse" aria-labelledby="event-step3-header" data-bs-parent="#event-guide">
            <div class="accordion-body">
                <p>イベントが無事終了したら、その日の「記録」を作成しましょう。イベント詳細ページにある<strong>「このイベントの活動ログを作成」</strong>ボタンを押してください。</p>
                <p>すると、イベントの日付・名称・場所が引き継がれた状態で、新しい走行ログまたはツーリングログの作成画面に移動します。これにより、「計画」と「記録」がスムーズに連携します。</p>
            </div>
        </div>
    </div>
</div>


<h3 class="mt-5 border-bottom pb-2">使い方ガイド：走行ログ (サーキット走行の記録編)</h3>
<p>走行ログは、「活動ログ」「セッションログ」「セッティングシート」の3つの要素で構成されます。</p>
<div class="accordion" id="driving-log-guide">
    <div class="accordion-item">
        <h2 class="accordion-header" id="driving-step1-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#driving-step1-collapse" aria-expanded="false" aria-controls="driving-step1-collapse">
                <strong>ステップ1: 活動ログを作成する</strong>
            </button>
        </h2>
        <div id="driving-step1-collapse" class="accordion-collapse collapse" aria-labelledby="driving-step1-header" data-bs-parent="#driving-log-guide">
            <p class="small p-3">（イベント機能から連携した場合、このステップは一部省略できます）</p>
            <div class="accordion-body">
                <p>まず、その日の走行会全体の「入れ物」となる活動ログを作成します。ナビゲーションバーの「活動記録」→「走行ログ」から車両を選択し、「新しい活動ログを追加」ボタンを押します。</p>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="driving-step2-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#driving-step2-collapse" aria-expanded="false" aria-controls="driving-step2-collapse">
                <strong>ステップ2: セッションを記録する</strong>
            </button>
        </h2>
        <div id="driving-step2-collapse" class="accordion-collapse collapse" aria-labelledby="driving-step2-header" data-bs-parent="#driving-log-guide">
            <div class="accordion-body">
                <p>活動ログ詳細ページで、「新しいセッションを記録」ボタンから、1回の走行（例: 1本目、2本目）ごとのセッションログを作成します。</p>
                <ul>
                    <li><strong>使用セッティング:</strong> 事前に作成した「セッティングシート」を紐付けられます。セッティングシートは、サスペンションやスプロケット等の設定を保存できるテンプレートです。</li>
                    <li><strong>ラップタイム:</strong> 手入力のほか、ZiiXやMYLAPSのCSVファイルをインポートして一括登録できます。</li>
                    <li><strong>走行メモ:</strong> マシンの挙動や改善点などを自由に記述します。</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="driving-step3-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#driving-step3-collapse" aria-expanded="false" aria-controls="driving-step3-collapse">
                <strong>ステップ3: 記録を比較・分析する</strong>
            </button>
        </h2>
        <div id="driving-step3-collapse" class="accordion-collapse collapse" aria-labelledby="driving-step3-header" data-bs-parent="#driving-log-guide">
            <div class="accordion-body">
                <p>記録が溜まってきたら、分析機能を活用しましょう。</p>
                <ul>
                    <li><strong>セッション比較:</strong> 複数のセッションにチェックを入れて比較ボタンを押すと、セッティングの違いとラップタイムの差が一目で分かります。</li>
                    <li><strong>ベストセッティング検索:</strong> 各サーキットで自己ベストタイムを記録した際のセッティングが自動で表示されます。</li>
                    <li><strong>ラップタイムグラフ:</strong> 各セッションの詳細ページでは、ラップタイムの推移がグラフで表示され、安定性を視覚的に確認できます。</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="driving-step4-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#driving-step4-collapse" aria-expanded="false" aria-controls="driving-step4-collapse">
                <strong>ステップ4 (応用編): リーダーボードに参加する</strong>
            </button>
        </h2>
        <div id="driving-step4-collapse" class="accordion-collapse collapse" aria-labelledby="driving-step4-header" data-bs-parent="#driving-log-guide">
            <div class="accordion-body">
                <p>他のユーザーとサーキットのベストラップタイムを競い合うことができる、オプトイン形式のランキング機能です。</p>
                <h5 class="mt-3"><i class="fas fa-sign-in-alt text-primary me-2"></i>参加方法</h5>
                <p>走行ログのセッションを記録・編集する際に、<strong>「このセッションの記録をリーダーボードに掲載することを許可する」</strong>のチェックボックスをONにしてください。これだけで、あなたのそのサーキットでの自己ベストタイムが自動的にランキングに登録・更新されます。</p>
                
                <h5 class="mt-4"><i class="fas fa-exclamation-triangle text-warning me-2"></i>注意事項</h5>
                <ul>
                    <li>ランキングには、あなたの表示名（またはMisskeyユーザー名）、アバター、車両名が公開されます。</li>
                    <li>リーダーボードは、現在一部のサーキットのみが対象です。対象サーキットはリーダーボードのトップページで確認できます。</li>
                    <li>いつでもセッションの編集画面からチェックを外すことで、ランキングからあなたの記録を非公開にできます。</li>
                </ul>
            </div>
        </div>
    </div>
    </div>

<h3 class="mt-5 border-bottom pb-2">使い方ガイド：ツーリングログ (旅の記録編)</h3>
<p>ツーリングの思い出を、立ち寄った場所やSNS投稿と共に記録します。</p>
<div class="accordion" id="touring-log-guide">
    <div class="accordion-item">
        <h2 class="accordion-header" id="touring-step1-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#touring-step1-collapse" aria-expanded="false" aria-controls="touring-step1-collapse">
                <strong>ステップ1: ツーリングログを作成する</strong>
            </button>
        </h2>
        <div id="touring-step1-collapse" class="accordion-collapse collapse" aria-labelledby="touring-step1-header" data-bs-parent="#touring-log-guide">
            <div class="accordion-body">
                <p>ナビゲーションバーの「活動記録」→「ツーリングログ」から車両を選択し、「新規ログ作成」ボタンを押します。</p>
                <ul>
                    <li><strong>ツーリング名・日付:</strong> ログの基本情報として入力します。</li>
                    <li><strong>メモ:</strong> ツーリング全体の感想や総括などを自由に記述できます。</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="touring-step2-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#touring-step2-collapse" aria-expanded="false" aria-controls="touring-step2-collapse">
                <strong>ステップ2: 立ち寄りスポットを記録する</strong>
            </button>
        </h2>
        <div id="touring-step2-collapse" class="accordion-collapse collapse" aria-labelledby="touring-step2-header" data-bs-parent="#touring-log-guide">
            <div class="accordion-body">
                <p>ログ作成・編集画面の「立ち寄りスポット」セクションで、「スポットを追加」ボタンを押して、ツーリングで訪れた場所を記録します。</p>
                <ul>
                    <li>道の駅、絶景ポイント、食事処など、好きなだけ追加できます。</li>
                    <li>各スポットには、簡単なメモや写真のURLを記録しておくことができます。</li>
                    <li>ハンドルをドラッグ＆ドロップすることで、訪れた順番を自由に入れ替えられます。</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="touring-step3-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#touring-step3-collapse" aria-expanded="false" aria-controls="touring-step3-collapse">
                <strong>ステップ3: Misskey投稿でスクラップブックを作る</strong>
            </button>
        </h2>
        <div id="touring-step3-collapse" class="accordion-collapse collapse" aria-labelledby="touring-step3-header" data-bs-parent="#touring-log-guide">
            <div class="accordion-body">
                <p>ツーリングの思い出をより鮮やかに残すための独自機能です。</p>
                <ol>
                    <li>ログ作成・編集画面の右側にある「スクラップブック」セクションで、「ノートを取り込む」ボタンを押します。</li>
                    <li>モーダルウィンドウが開かれ、ツーリングログに設定した日付と同じ日にあなたがMisskeyに投稿したノートが自動で一覧表示されます。</li>
                    <li>ツーリングに関連する投稿にチェックを入れて「決定」ボタンを押すと、それらの投稿がログに紐付けられます。</li>
                </ol>
                <p>保存後、ログ詳細ページでは、選択したMisskeyの投稿が写真付きのカード形式で表示され、その日の出来事を時系列で振り返ることができる、あなただけの旅の記録が完成します。</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}