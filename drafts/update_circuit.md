本番環境へのデプロイ、承知いたしました。

RenderのWeb Shellは貼り付けが不安定なため、**「SSH接続してファイルを作成し、それを実行する」** 方法が最も安全で確実です。
また、ご指摘いただいた「桶川のクラスごとのコース分け（ミドル/ロング混在）」に対応し、かつインデントエラーが起きにくい**フラットな構造のスクリプト**を作成しました。

-----

### **① 本番環境用データ投入スクリプト (2025/11〜2026/1)**

#### **実行手順**

1.  ターミナルからRenderにSSH接続します。
    ```bash
    ssh user@ssh.oregon.render.com  # あなたの接続コマンドを使用
    ```
2.  データ投入用のPythonファイルを作成します。
    ```bash
    nano seed_schedule.py
    ```
3.  以下のコードをコピーして貼り付け、保存（`Ctrl+O` -\> `Enter`）して終了（`Ctrl+X`）します。
4.  Flask Shell経由で実行します。
    ```bash
    flask shell < seed_schedule.py
    ```

#### **`seed_schedule.py` のコード**

```python
from datetime import date, time
from motopuppu.models import db, TrackSchedule

# --- 定数定義: 1日の全スロット ---
ALL_SLOTS = [
    # AM
    (time(9, 0), time(9, 15), "ミニバイク①"), (time(9, 15), time(9, 30), "ミニバイク②"),
    (time(9, 30), time(9, 45), "大型バイク①"), (time(9, 45), time(10, 0), "大型バイク②"),
    (time(10, 0), time(10, 15), "ミニバイク①"), (time(10, 15), time(10, 30), "ミニバイク②"),
    (time(10, 30), time(10, 45), "大型バイク①"), (time(10, 45), time(11, 0), "大型バイク②"),
    (time(11, 0), time(11, 15), "ミニバイク①"), (time(11, 15), time(11, 30), "ミニバイク②"),
    (time(11, 30), time(11, 45), "大型バイク①"), (time(11, 45), time(12, 0), "大型バイク②"),
    (time(12, 0), time(12, 15), "ミニバイク①"), (time(12, 15), time(12, 30), "ミニバイク②"),
    # PM
    (time(13, 0), time(13, 15), "ミニバイク①"), (time(13, 15), time(13, 30), "ミニバイク②"),
    (time(13, 30), time(13, 45), "大型バイク①"), (time(13, 45), time(14, 0), "大型バイク②"),
    (time(14, 0), time(14, 15), "ミニバイク①"), (time(14, 15), time(14, 30), "ミニバイク②"),
    (time(14, 30), time(14, 45), "大型バイク①"), (time(14, 45), time(15, 0), "大型バイク②"),
    (time(15, 0), time(15, 15), "ミニバイク①"), (time(15, 15), time(15, 30), "ミニバイク②"),
    (time(15, 30), time(15, 45), "大型バイク①"), (time(15, 45), time(16, 0), "大型バイク②"),
    (time(16, 0), time(16, 15), "ミニバイク①"), (time(16, 15), time(16, 30), "ミニバイク②"),
]

# --- 登録データの定義 ---
# フォーマット: (日付, ミニのコース, 大型のコース, 備考, 時間帯モード)
# 時間帯モード: 'ALL'=終日, 'AM'=午前のみ, 'PM'=午後のみ
target_days = [
    # 1. 11月前半 (1-22日): ミニ=ミドル / 大型=ミドル
    (date(2025, 11, 1), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),
    (date(2025, 11, 4), "ミドルコース", "ミドルコース", "", "ALL"),
    (date(2025, 11, 5), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),
    (date(2025, 11, 7), "ミドルコース", "ミドルコース", "", "ALL"),
    (date(2025, 11, 8), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),
    (date(2025, 11, 9), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),
    (date(2025, 11, 10), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),
    (date(2025, 11, 11), "ミドルコース", "ミドルコース", "", "ALL"),
    (date(2025, 11, 12), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),
    (date(2025, 11, 14), "ミドルコース", "ミドルコース", "", "ALL"),
    (date(2025, 11, 15), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),
    (date(2025, 11, 16), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),
    (date(2025, 11, 17), "ミドルコース", "ミドルコース", "", "ALL"),
    (date(2025, 11, 18), "ミドルコース", "ミドルコース", "", "ALL"),
    (date(2025, 11, 19), "ミドルコース", "ミドルコース", "昼休みスタート練習", "ALL"),
    (date(2025, 11, 21), "ミドルコース", "ミドルコース", "", "ALL"),
    (date(2025, 11, 22), "ミドルコース", "ミドルコース", "入門枠あり", "ALL"),

    # 2. 11月後半〜12月中旬 (11/24-12/12): ミニ=ミドル / 大型=ロング
    (date(2025, 11, 24), "ミドルコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 11, 25), "ミドルコース", "ロングコース", "午後休業", "AM"), # 25日は午前のみ
    (date(2025, 11, 26), "ミドルコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 11, 28), "ミドルコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 11, 30), "ミドルコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 1), "ミドルコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 2), "ミドルコース", "ロングコース", "", "ALL"),
    (date(2025, 12, 3), "ミドルコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 5), "ミドルコース", "ロングコース", "", "ALL"),
    (date(2025, 12, 6), "ミドルコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 8), "ミドルコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 9), "ミドルコース", "ロングコース", "", "ALL"),
    (date(2025, 12, 10), "ミドルコース", "ロングコース", "昼休みスタート練習", "ALL"),
    (date(2025, 12, 12), "ミドルコース", "ロングコース", "", "ALL"),

    # 3. 12月中旬以降〜1月: ミニ=ロング / 大型=ロング
    (date(2025, 12, 15), "ロングコース", "ロングコース", "午後休業", "AM"),
    (date(2025, 12, 16), "ロングコース", "ロングコース", "午前貸切", "PM"),
    (date(2025, 12, 17), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 19), "ロングコース", "ロングコース", "", "ALL"),
    (date(2025, 12, 20), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 22), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 23), "ロングコース", "ロングコース", "", "ALL"),
    (date(2025, 12, 24), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 26), "ロングコース", "ロングコース", "午後貸切", "AM"),
    (date(2025, 12, 28), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2025, 12, 30), "ロングコース", "ロングコース", "午後休業", "AM"),
    
    (date(2026, 1, 3), "ロングコース", "ロングコース", "変則日程の可能性あり", "ALL"),
    (date(2026, 1, 4), "ロングコース", "ロングコース", "午後ピン耐", "AM"),
    (date(2026, 1, 5), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 6), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 7), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 9), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 10), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 12), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 13), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 14), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 16), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 17), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 18), "ロングコース", "ロングコース", "午後ビギナーズデー", "AM"),
    (date(2026, 1, 19), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 20), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 21), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 23), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 24), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 25), "ロングコース", "ロングコース", "午後ピン耐", "AM"),
    (date(2026, 1, 26), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 27), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 28), "ロングコース", "ロングコース", "入門枠あり", "ALL"),
    (date(2026, 1, 30), "ロングコース", "ロングコース", "", "ALL"),
    (date(2026, 1, 31), "ロングコース", "ロングコース", "", "ALL")
]

# --- 登録処理 ---
schedules_to_add = []

for target_date, mini_layout, large_layout, notes, time_mode in target_days:
    # 既存データのクリーンアップ (全コースパターン削除)
    TrackSchedule.query.filter(
        TrackSchedule.circuit_name.like("桶川スポーツランド%"),
        TrackSchedule.date == target_date
    ).delete(synchronize_session=False)
    
    for start, end, title in ALL_SLOTS:
        # 時間帯フィルタ
        if time_mode == "AM" and start >= time(12, 30): continue
        if time_mode == "PM" and start < time(13, 0): continue
        
        # タイトルに応じてコースを振り分け
        circuit_name = ""
        if "ミニ" in title:
            circuit_name = f"桶川スポーツランド {mini_layout}"
        elif "大型" in title:
            circuit_name = f"桶川スポーツランド {large_layout}"
        else:
            continue
            
        schedules_to_add.append(TrackSchedule(
            circuit_name=circuit_name, date=target_date, 
            start_time=start, end_time=end, title=title, notes=notes
        ))

if schedules_to_add:
    db.session.add_all(schedules_to_add)
    db.session.commit()
    print(f"=== 完了: データ登録数 {len(schedules_to_add)} 件 ===")
else:
    print("登録するデータがありませんでした。")
```

-----

### **② 今後の走行枠データ更新手順書 (Reference Manual)**

今後（例：2026年2月以降）、新しいスケジュールを登録する際の手順です。

#### **STEP 1: スケジュール情報の入手**

公式サイト ([okspo.jp](https://okspo.jp/)) の「お知らせ」や「スケジュール」ページから、翌月以降のスケジュール表（テキスト）をコピーします。

#### **STEP 2: Geminiへのスクリプト作成依頼**

Geminiに以下のプロンプトを入力し、今回作成したようなPythonコードを生成させます。

> **【プロンプト】**
>
> 以下のテキストデータは、桶川スポーツランドの2026年2月のスケジュールです。
> Flaskアプリケーションの `TrackSchedule` モデルにデータを投入するためのPythonスクリプトを作成してください。
>
> **条件:**
>
> 1.  `AM_SLOTS` と `PM_SLOTS` の定義を含めてください。
> 2.  `target_days` というリストに、`(日付, ミニのコース, 大型のコース, 備考, 時間帯モード)` のタプルを定義してください。
>       - 時間帯モードは `'ALL'`, `'AM'`, `'PM'` で指定。
> 3.  テキストデータから、「日付」「午前コース」「午後コース」「備考（入門枠など）」を読み取ってください。
>       - 特に「ミニバイク」と「大型バイク」でコースが違う日（ミドル/ロング）を正確に反映してください。
> 4.  ループで `TrackSchedule` オブジェクトを作成し、`db.session.add_all` で一括登録する形式にしてください。
>
> **スケジュールテキスト:**
> (ここにWebサイトからコピーしたテキストを貼り付ける)

#### **STEP 3: 本番環境での実行**

1.  **Render Dashboard** から SSHコマンドを取得し、ターミナルで接続します。
    ```bash
    ssh user@ssh.oregon.render.com
    ```
2.  `nano seed_schedule.py` でファイルを作成し、Geminiが生成したコードを貼り付けます。
3.  `flask shell < seed_schedule.py` を実行してデータを投入します。
4.  完了したら `rm seed_schedule.py` でファイルを削除します。